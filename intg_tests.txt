Starting new "ansible-test-controller-yDvS86Iy" container.
Adding "ansible-test-controller-yDvS86Iy" to container database.
Installing requirements for Python 3.12 (controller)
Collecting git+https://github.com/flightctl/flightctl-python-client.git (from -r tests/integration/requirements.txt (line 4))
  Cloning https://github.com/flightctl/flightctl-python-client.git to /tmp/pip-req-build-yc1wzupo
  Running command git clone --filter=blob:none --quiet https://github.com/flightctl/flightctl-python-client.git /tmp/pip-req-build-yc1wzupo
  Resolved https://github.com/flightctl/flightctl-python-client.git to commit 2e1659c87a25c1b765f7dfd343d932a9eaa086b8
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Getting requirements to build wheel: started
  Getting requirements to build wheel: finished with status 'done'
  Preparing metadata (pyproject.toml): started
  Preparing metadata (pyproject.toml): finished with status 'done'
Collecting jsonschema (from -r tests/integration/requirements.txt (line 1))
  Downloading jsonschema-4.23.0-py3-none-any.whl (88 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 88.5/88.5 kB 1.9 MB/s eta 0:00:00
Collecting jsonpatch (from -r tests/integration/requirements.txt (line 2))
  Downloading jsonpatch-1.33-py2.py3-none-any.whl (12 kB)
Collecting attrs>=22.2.0 (from jsonschema->-r tests/integration/requirements.txt (line 1))
  Downloading attrs-25.1.0-py3-none-any.whl (63 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 63.2/63.2 kB 4.8 MB/s eta 0:00:00
Collecting jsonschema-specifications>=2023.03.6 (from jsonschema->-r tests/integration/requirements.txt (line 1))
  Downloading jsonschema_specifications-2024.10.1-py3-none-any.whl (18 kB)
Collecting referencing>=0.28.4 (from jsonschema->-r tests/integration/requirements.txt (line 1))
  Downloading referencing-0.36.2-py3-none-any.whl (26 kB)
Collecting rpds-py>=0.7.1 (from jsonschema->-r tests/integration/requirements.txt (line 1))
  Downloading rpds_py-0.23.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (391 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 391.6/391.6 kB 7.6 MB/s eta 0:00:00
Collecting jsonpointer>=1.9 (from jsonpatch->-r tests/integration/requirements.txt (line 2))
  Downloading jsonpointer-3.0.0-py2.py3-none-any.whl (7.6 kB)
Collecting python-dateutil>=2.8.2 (from flightctl==1.0.0->-r tests/integration/requirements.txt (line 4))
  Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 229.9/229.9 kB 21.1 MB/s eta 0:00:00
Collecting pydantic>=2 (from flightctl==1.0.0->-r tests/integration/requirements.txt (line 4))
  Downloading pydantic-2.10.6-py3-none-any.whl (431 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 431.7/431.7 kB 29.4 MB/s eta 0:00:00
Collecting typing-extensions>=4.7.1 (from flightctl==1.0.0->-r tests/integration/requirements.txt (line 4))
  Downloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)
Collecting annotated-types>=0.6.0 (from pydantic>=2->flightctl==1.0.0->-r tests/integration/requirements.txt (line 4))
  Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
Collecting pydantic-core==2.27.2 (from pydantic>=2->flightctl==1.0.0->-r tests/integration/requirements.txt (line 4))
  Downloading pydantic_core-2.27.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 2.0/2.0 MB 29.4 MB/s eta 0:00:00
Building wheels for collected packages: flightctl
  Building wheel for flightctl (pyproject.toml): started
  Building wheel for flightctl (pyproject.toml): finished with status 'done'
  Created wheel for flightctl: filename=flightctl-1.0.0-py3-none-any.whl size=219586 sha256=9d3e30db4c23b1d79ff2da854b3d23fc295595d410da4f325659533d3a7d69c0
  Stored in directory: /tmp/pip-ephem-wheel-cache-3xkoavci/wheels/19/9b/38/122169ed77c33baaa00a6a623e58971fb411e27d1b382a362a
Successfully built flightctl
Installing collected packages: typing-extensions, rpds-py, python-dateutil, jsonpointer, attrs, annotated-types, referencing, pydantic-core, jsonpatch, pydantic, jsonschema-specifications, jsonschema, flightctl
Successfully installed annotated-types-0.7.0 attrs-25.1.0 flightctl-1.0.0 jsonpatch-1.33 jsonpointer-3.0.0 jsonschema-4.23.0 jsonschema-specifications-2024.10.1 pydantic-2.10.6 pydantic-core-2.27.2 python-dateutil-2.9.0.post0 referencing-0.36.2 rpds-py-0.23.1 typing-extensions-4.12.2
Running flightctl_certificate_management integration test role

PLAY [testhost] ****************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : include_tasks] ************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_certificate_management-27af7_u5-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_certificate_management/tasks/enrollment-approval.yml for testhost[0m

TASK [flightctl_certificate_management : Create an enrollment request] *********
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Approve the enrollment request in check mode] ***
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Get the enrollment request] ***********
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the enrollment request was not approved] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Approve the enrollment request] *******
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Assert that approval request succeeded] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Get the enrollment request] ***********
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the enrollment request is now approved] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Try to approve the enrollment request again (idempotency)] ***
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the result was not changed] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Delete enrollment request] ************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Delete test device] *******************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : include_tasks] ************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_certificate_management-27af7_u5-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_certificate_management/tasks/enrollment-denial.yml for testhost[0m

TASK [flightctl_certificate_management : Create an enrollment request] *********
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Deny the enrollment request in check mode] ***
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Get the enrollment request] ***********
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the enrollment request was not denied] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Deny the enrollment request] **********
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Assert that approval request succeeded] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Get the enrollment request] ***********
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the enrollment request is now denied] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Delete enrollment request] ************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : include_tasks] ************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_certificate_management-27af7_u5-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_certificate_management/tasks/certificate-signing-approval.yml for testhost[0m

TASK [flightctl_certificate_management : Create a csr] *************************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Approve the csr] **********************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Assert that approval request succeeded] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Get the csr] **************************
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the csr is now approved] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Try to approve the csr again (idempotency)] ***
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the result was not changed] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Delete csr] ***************************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : include_tasks] ************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_certificate_management-27af7_u5-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_certificate_management/tasks/certificate-signing-denial.yml for testhost[0m

TASK [flightctl_certificate_management : Create a csr] *************************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Deny the csr] *************************
[0;33mchanged: [testhost][0m

TASK [flightctl_certificate_management : Assert that approval request succeeded] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Get the csr] **************************
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the csr is now denied] ****
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Try to approve the csr again (idempotency)] ***
[0;32mok: [testhost][0m

TASK [flightctl_certificate_management : Assert that the result was not changed] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_certificate_management : Delete csr] ***************************
[0;33mchanged: [testhost][0m

PLAY RECAP *********************************************************************
[0;33mtesthost[0m                   : [0;32mok=42  [0m [0;33mchanged=15  [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Running flightctl_enrollment_config_info integration test role

PLAY [testhost] ****************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [testhost][0m

TASK [flightctl_enrollment_config_info : include_tasks] ************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_enrollment_config_info-1z0qbepb-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_enrollment_config_info/tasks/fetch-config.yml for testhost[0m

TASK [flightctl_enrollment_config_info : Create a csr] *************************
[0;33mchanged: [testhost][0m

TASK [flightctl_enrollment_config_info : Approve the csr] **********************
[0;33mchanged: [testhost][0m

TASK [flightctl_enrollment_config_info : Fetch enrollment config for the csr] ***
[0;32mok: [testhost][0m

TASK [flightctl_enrollment_config_info : Assert that the request was successful] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_enrollment_config_info : Delete csr] ***************************
[0;33mchanged: [testhost][0m

PLAY RECAP *********************************************************************
[0;33mtesthost[0m                   : [0;32mok=7   [0m [0;33mchanged=3   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Running flightctl_resource integration test role

PLAY [testhost] ****************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [testhost][0m

TASK [flightctl_resource : include_tasks] **************************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_resource-r1mkzbkd-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_resource/tasks/update-device.yml for testhost[0m

TASK [flightctl_resource : Create a test device] *******************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource : Update the test device] *****************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource : Get test device] ************************************
[0;32mok: [testhost][0m

TASK [flightctl_resource : Assert that Device spec was updated] ****************
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource : Update the test device with force_update] ***********
[0;33mchanged: [testhost][0m

TASK [flightctl_resource : Get test device] ************************************
[0;32mok: [testhost][0m

TASK [flightctl_resource : Assert that Device spec was updated from the forced update] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource : Delete test device] *********************************
[0;33mchanged: [testhost][0m

PLAY RECAP *********************************************************************
[0;33mtesthost[0m                   : [0;32mok=10  [0m [0;33mchanged=4   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Running flightctl_resource_info integration test role

PLAY [testhost] ****************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : include_tasks] *********************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_resource_info-mjja0e6q-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_resource_info/tasks/devices.yml for testhost[0m

TASK [flightctl_resource_info : Create a test fleet] ***************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Create a test device] **************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Get test device] *******************************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that device info was fetched] ***********
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Get rendered spec for the test device] *********
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the rendered device info was fetched] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Create a test device with a label] *************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Create a second test device with a label] ******
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Query for all devices by label] ****************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the device info was fetched by label] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Query for all devices by owner] ****************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the device info was filtered by owner] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Query for all devices] *************************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the device info was fetched by label] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Query for all devices with summary_only] *******
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the device summary info was fetched] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Query for all devices with a limit] ************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the limited info was fetched] ******
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Use the continue token to query for remaining devices] ***
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the limited info was fetched] ******
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Query for all devices with a status filter] ****
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the status filtered data was fetched] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Query for devices with a filter selector] ******
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the status filtered data was fetched] ***
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Delete test devices] ***************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Delete test fleet] *****************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : include_tasks] *********************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_resource_info-mjja0e6q-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_resource_info/tasks/fleets.yml for testhost[0m

TASK [flightctl_resource_info : Create a test fleet] ***************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Create test devices] ***************************
[0;33mchanged: [testhost] => (item=test-device-1)[0m
[0;33mchanged: [testhost] => (item=test-device-2)[0m
[0;33mchanged: [testhost] => (item=test-device-3)[0m

TASK [flightctl_resource_info : Fetch fleet] ***********************************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that the fleet info was fetched] ********
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Delete test devices] ***************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Delete test fleet] *****************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : include_tasks] *********************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_resource_info-mjja0e6q-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_resource_info/tasks/repository.yml for testhost[0m

TASK [flightctl_resource_info : Create a test repo] ****************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Get test repo] *********************************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that repo info was fetched] *************
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Delete test repo] ******************************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : include_tasks] *********************************
[0;36mincluded: /root/ansible_collections/flightctl/core/tests/output/.tmp/integration/flightctl_resource_info-mjja0e6q-Ã…Ã‘ÅšÃŒÎ²ÅÃˆ/tests/integration/targets/flightctl_resource_info/tasks/resource-sync.yml for testhost[0m

TASK [flightctl_resource_info : Create a test resource sync] *******************
[0;33mchanged: [testhost][0m

TASK [flightctl_resource_info : Get test resource sync] ************************
[0;32mok: [testhost][0m

TASK [flightctl_resource_info : Assert that resource sync info was fetched] ****
[0;32mok: [testhost] => {[0m
[0;32m    "changed": false,[0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [flightctl_resource_info : Delete test resource sync] *********************
[0;33mchanged: [testhost][0m

PLAY RECAP *********************************************************************
[0;33mtesthost[0m                   : [0;32mok=45  [0m [0;33mchanged=14  [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

